<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NewLoop</title>
</head>
<body>
  
  <script>
    // 1. for of 루프(ES6): 반복 가능한 객체(iterable)에만 사용 가능하며 해당 객체의 값을 반복함
    // iterables: Array, object, String, NodeList(html collection) 등등
    // for (const element(객체의 값) of object(반복 가능한 객체)) {
    //   실행코드;
    // }

    // 1.1 배열에 대한 반복(idx 값이 굳이 필요 없는 경우에는 for of 를 사용하세요)
    const arr = ['apple', 'strawberry', 'rasberry', 'blueberry'];
    for (let i = 0; i < arr.length; i++) console.log(arr[i]);
    for (const items of arr) console.log(items);

    // 1.2 문자열에 대한 반복
    const language = 'JavaScript';
    for (const items of language) console.log(items);
    
    // 1.3 객체에 대한 반복(Object 사용자 정의 객체는 iterable이 아님)
    const car = {
      maker: 'BMW',
      color: 'white',
      year: '2020'
    }
    // 사용자 정의 객체에 대한 반복은 어떻게 구현할까?
    console.log(Object.keys(car));
    for (const key of Object.keys(car)) {
      const value = car[key];
      console.log(value);
    }
    // (참고) Object.entries(): 객체의 모든 key-value 쌍을 배열로 가져온다
    for (const items of Object.keys(car)) console.log(car[items]);
    for (const items of Object.values(car)) console.log(items);
    for (const items of Object.entries(car)) console.log(items[1]);
    for (const items in car) console.log(car[items]);
    
    // (참고) 반복 가능한 객체를 구분하는 법
    // 반복 가능한 객체: Symbol.iterator 가 구현된 객체를 말함
    console.log([1, 2, 3]); // 있음
    console.log(new String('berry')); // 있음
    console.log(car); // 없음
    
    // 2. for in 루프(ES1차)
    // (순서 없이) 객체의 키를 반복
    // for (const key in object) {
    //   실행코드;
    // }
    for (const items in car) console.log(items + ": " +  car[items]);

    // 3. for of vs for in
    const list = [false, null, undefined, NaN];

    // for in 은 키를 반환(key 는 모두 문자열)
    for (const items in list) console.log(items, typeof items);
    
    // for of 는 값을 반환
    for (const items of list) console.log(items, typeof items);

    // (참고) 배열에는 for in 루프 사용을 지양
    // 1) 배열에 사용 시 성능이 떨어짐
    // (객체와 함께 사용할 때 최적화되어 있어서 객체 대비 10~100배 정도 느리다.)
    // (반복문의 속도가 대체로 빠른 편이기 때문에 병목 지점에서만 문제가 되긴 하지만 이런 차이를 알고 적절히 사용)
    // 2) 인덱스 순서가 중요한 경우 순서를 보장할 수 없음
    // 배열 값이 예상한 순서대로 액세스 되지 않을 수 있다.
    // 순서가 중요한 경우 for 루프, for of 루프 또는 Array.forEach()를 사용 권장
  </script>
</body>
</html>