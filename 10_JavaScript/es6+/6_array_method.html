<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NewArray</title>
</head>
<body>

  <!-- * -->
  <h2>입력한 값보다 나이가 많은 사람 찾기</h2>
  <input type="number" id="ageToCheck" value="30">
  <button type="button" onclick="searchFunc()">검색</button>
  




  <script>
    // 유용한 배열 메소드(ES5)

    // 1. map
    // 1. array.map((currentValue, index) => {}): 기존 배열을 돌면서 요소들을 갖고와 새로운 배열을 생성할 때 사용(idx 빼도됨)
    // 기존 배열의 각 요소에 대해 한 번씩 함수를 호출하고 반환하는 값으로 새로운 배열을 생성함(원래 배열을 변경하지 않음)
    // 주의: 꼭 return 해줘야함!
    const arr = [65, 44, 12, 4];
    const newArr = arr.map(val => val * 10); // 암시적으로 return 생략함(한줄)
    console.log(newArr);
    
    // Quiz
    // 각 사람의 전체 이름을 가진 새 배열 만들기
    // 예상 결과: ['Goni Kim', 'Zero Cho', 'Velopert Kim']
    const persons = [
      { firstName: 'Goni', lastName: 'Kim' },
      { firstName: 'Zero', lastName: 'Cho' },
      { firstName: 'Velopert', lastName: 'Kim' }
    ];

    const newPersons = persons.map(items => `${items.firstName} ${items.lastName}`);
    console.log(newPersons);

    // 2. array.filter(function(currentValue, index))
    // 제공된 테스트 함수를 통과하는 요소들만 따로 추출하여 새 배열을 만듦
    // 테스트 함수에서는 true 또는 false를 반환해야 하며, 여기서 true를 반환하는 경우만 새로운 배열에 포함됨
    // 원래 배열을 변경하지 않음
    
    // ages 배열에서 19세 이상인 모든 값들로 새 배열 만들기
    const ages = [32, 33, 16, 40];
    const newAges = ages.filter(item => item >= 19);
    console.log(newAges);
    // 예상 결과: [32, 33, 40]
    
    // 활용 Tip1: 검색 또는 필터링 기능 만들기(filter)
    const student = [
      {name: 'Goni', age: 36},
      {name: 'Jon Jones', age: 38},
      {name: 'Tom Aspinall', age: 32},
      {name: 'Magomed Ankalaev', age: 30},
      {name: 'Khamzat Chimaev', age: 30},
    ];

    // *
    function searchFunc() {
      const ageValue = Number(document.querySelector('#ageToCheck').value);
      const toShow = student.filter(item => item.age > ageValue);
      for (const items of Object.entries(toShow)) console.log(`${items[1].name} (${items[1].age})`);
    }

    // 활용 Tip2: 삭제 기능 만들기(filter)
    const products = [
      {id : '1', title: 'snack', price: 1000},
      {id : '2', title: 'pen', price: 2000},
      {id : '3', title: 'candy', price: 500},
      {id : '4', title: 'note', price: 1800},
      {id : '5', title: 'case', price: 2300}
    ];

    // Quiz: 배열의 filter()를 사용하여 id 값이 '2'인 상품을 제겨해보세요
    console.log(products.filter(items => items.id !== '2'));

    // 새로운 배열 메소드(ES6)

    // 3. array.find(function(currentValue, index))
    // 제공된 테스트 함수를 충족하는 배열의 첫번째 요소를 반환
    // 충족하는 요소가 없으면 undefined를 반환
    // 원래 배열을 변경하지 않음

    // 배열의 요소 중 3보다 큰 첫번째 요소를 반환
    const array = [1, 2, 3, 4, 5];
    const foundMax = array.find(item => item > 3);
    console.log(foundMax);
    console.log(array.find(item => item > 190));

    // Quiz: products 에서 id 값이 '3'인 상품을 찾아보세요
    console.log(products.find(item => item.id === '3'));
    
    // 사용 예: 배열에서 고유한 값(id 등)으로 특정 요소를 찾을 때 유용함
    
    // 4. array.findIndex(function(currentValue, index))
    // 제공된 테스트 함수를 충족하는 배열의 첫번째 요소의 인덱스를 반환
    // 충족하는 요소가 없으면 -1을 반환
    // 원래 배열을 변경하지 않음
    console.log(products.findIndex(item => item.id === '3'));

    const greetings = ['hello', 'hi', 'byebye', 'goodbye', 'hi'];
    const word = greetings.findIndex(item => item.includes('hi'));
    const word2 = greetings.findIndex(item => item.includes('hit')); // 없으면 -1
    console.log(word);
    console.log(word2);
  </script>
</body>
</html>